{% extends 'base.html.twig' %}
{% block title %}
  {{ (mode == 'new') ? 'New Prerequisite' : 'Edit Prerequisite' }}
{% endblock %}

{% block stylesheet %}
<style>

</style>
{% endblock %}

{% block body %}
  <div class="container taright">
    <form class="form fright" method="post">
      <h1 class="welcomeText tacenter">{{ (mode == 'new') ? 'New Prerequisite' : 'Edit Prerequisite' }}</h1>
      <h2>{{ result_message is defined ? result_message : '' }}</h2>

      <label for="form[course_module_type]">Course or Module?</label>
      <select name="form[course_module_type]" id="courseModuleType">
        <option value="course" {{ ((myCourse.course_module_id is defined ? myCourse.course_module_id : '') == 'course') ? 'selected' : '' }}>Course</option>
        <option value="module" {{ ((myCourse.course_module_id is defined ? myCourse.course_module_id : '') == 'module') ? 'selected' : '' }}>Module</option>
      </select>

      <label for="form[course_module_id]">Course/Module Name</label>
      <select name="form[course_module_id]" id="courseModuleId">
        <optgroup label="Courses" id="courses1">
          {% for course in courses %}
            <option value="{{ course.id }}" {{ (course.id == (myCourseModule.id is defined ? myCourseModule.id : '')) ? 'selected' : '' }}>{{ course.courseName }}</option>
          {% endfor %}
        </optgroup>

        <optgroup label="Modules" id="modules1">
          {% for module in modules %}
            <option value="{{ module.id }}" {{ (module.id == (myModule.id is defined ? myModule.id : '')) ? 'selected' : '' }}>{{ module.moduleName }}</option>
          {% endfor %}
        </optgroup>
      </select>

      <label for="form[prerequisite_type]">Prerequisite Type</label>
      <select name="form[prerequisite_type]" id="prerequisiteType">
        <option value="course" {{ ((myCourse.course_module_id is defined ? myCourse.course_module_id : '') == 'course') ? 'selected' : '' }}>Course</option>
        <option value="module" {{ ((myCourse.course_module_id is defined ? myCourse.course_module_id : '') == 'module') ? 'selected' : '' }}>Module</option>
      </select>

      <label for="form[prerequisite_id]">Prerequisite</label>
      <select name="form[prerequisite_id]" id="prerequisiteId">
        <optgroup label="Courses" id="courses2">
          {% for course in courses %}
            <option value="{{ course.id }}" {{ (course.id == (myCourse.id is defined ? myCourse.id : '')) ? 'selected' : '' }}>{{ course.courseName }}</option>
          {% endfor %}
        </optgroup>

        <optgroup label="Modules" id="modules2">
          {% for module in modules %}
            <option value="{{ module.id }}" {{ (module.id == (myModule.id is defined ? myModule.id : '')) ? 'selected' : '' }}>{{ module.moduleName }}</option>
          {% endfor %}
        </optgroup>
      </select>

      <button>{{ (mode == 'new') ? 'Create Prerequisite' : 'Save Changes' }}</button>
    </form>

    <hr class="clear" width="0" />
  </div>
{% endblock %}

{% block javascript %}
  <script type="text/javascript">
    function TypeDiff() {
      var courseModuleType = $('#courseModuleType').val();
      (courseModuleType == 'course') ? $('#module1').hide() : $('#course1').hide();

      $('#' + courseModuleType + 's').show();
    }

    $(document).ready(function(){
      $('#course1').hide();
      //TypeDiff();
      $('#courseModuleType').on("change", function() {
        TypeDiff();
      });
    });
  </script>
{% endblock %}
